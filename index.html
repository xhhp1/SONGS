<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>My Songs Player</title>

<style>
  :root{
    --bg:#0f1115; --panel:#171a21; --text:#e6e6e6; --muted:#9aa4b2;
    --brand:#4da3ff; --radius:16px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background: radial-gradient(80% 120% at 20% 10%, #1a2030 0%, #0c0f14 60%, #06070a 100%);
    color:var(--text); font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  }
  .player{
    max-width:960px; margin:clamp(12px,4vw,36px) auto; padding:clamp(12px,3vw,24px);
    background:#141820; border:1px solid #222a; border-radius:var(--radius);
    box-shadow:0 10px 40px #0008, inset 0 1px 0 #fff1;
  }
  .now{display:grid; grid-template-columns:120px 1fr; gap:16px; align-items:center;}
  .cover{width:120px;height:120px;border-radius:12px;background:linear-gradient(135deg,#333,#111);
    border:1px solid #000; box-shadow: inset 0 0 30px #0008, 0 8px 24px #0009;}
  .meta h1{margin:0 0 6px; font-size:clamp(18px,3vw,28px); font-weight:700}
  .meta p{margin:0; color:var(--muted)}
  .controls{margin-top:18px; display:grid; gap:12px;}
  .buttons{display:flex; gap:10px; align-items:center;}
  .buttons button{background:#0d1117;border:1px solid #263244;color:var(--text);
    border-radius:999px; padding:10px 14px; cursor:pointer; transition:transform .1s, background .2s, border-color .2s;}
  .buttons button:hover{transform:translateY(-1px); background:#111827; border-color:#2b3b52}
  .buttons #btn-play{font-size:20px; padding:10px 16px; background:linear-gradient(180deg,#1a2333,#0d1422); border-color:#31425a}
  .seek{display:grid; grid-template-columns:48px 1fr 48px; gap:10px; align-items:center}
  input[type=range]{-webkit-appearance:none;appearance:none;height:6px;border-radius:999px;background:#2a3344;outline:none}
  input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:18px;height:18px;border-radius:50%;background:var(--brand);border:2px solid #fff3;box-shadow:0 1px 4px #0008}
  input[type=range]::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:var(--brand);border:none}
  .volume{display:flex; gap:10px; align-items:center}
  .playlist{margin-top:20px;}
  .playlist header{display:flex; justify-content:space-between; align-items:center;}
  .playlist h2{margin:0 0 10px; font-size:18px; color:#d8e4f0}
  .playlist .add button{background:#0f172a; border:1px solid #243148; color:#cfe9ff; padding:8px 12px; border-radius:10px; cursor:pointer}
  ul#list{list-style:none; padding:0; margin:10px 0 0; border-top:1px dashed #2a3242}
  li.track{display:grid; grid-template-columns:28px 1fr 72px; gap:10px; align-items:center; padding:10px 0; border-bottom:1px dashed #2a3242}
  li.track .idx{color:#7c8aa0; font-variant-numeric:tabular-nums}
  li.track .name{white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  li.track .dur{color:#9eb0c7; text-align:right}
  li.track.active{background:linear-gradient(90deg,#18213466,transparent); border-radius:8px}
  @media (max-width:560px){ .now{grid-template-columns:80px 1fr} .cover{width:80px;height:80px} li.track{grid-template-columns:20px 1fr 56px} }
</style>
</head>
<body>
  <main class="player">
    <section class="now">
      <div class="cover" id="cover" aria-hidden="true"></div>
      <div class="meta">
        <h1 id="title">‚Äî</h1>
        <p id="artist">‚Äî</p>
      </div>
    </section>

    <section class="controls">
      <div class="buttons">
        <button id="btn-shuffle" title="Shuffle (S)">üîÄ</button>
        <button id="btn-prev" title="Previous (‚Üê)">‚èÆÔ∏è</button>
        <button id="btn-play" title="Play/Pause (Space)">‚ñ∂Ô∏è</button>
        <button id="btn-next" title="Next (‚Üí)">‚è≠Ô∏è</button>
        <button id="btn-repeat" title="Repeat (R)">üîÅ</button>
      </div>

      <div class="seek">
        <span id="current">0:00</span>
        <input type="range" id="seek" min="0" max="100" step="0.1" value="0" />
        <span id="duration">0:00</span>
      </div>

      <div class="volume">
        <button id="btn-mute" title="Mute (M)">üîä</button>
        <input type="range" id="vol" min="0" max="1" step="0.01" value="1" />
      </div>
    </section>

    <section class="playlist">
      <header>
        <h2>Playlist</h2>
        <div class="add">
          <input type="file" id="fileInput" accept="audio/*" multiple hidden />
          <button id="btn-add">Ôºã Add Songs</button>
        </div>
      </header>
      <ul id="list" aria-label="Song list"></ul>
    </section>
  </main>

  <audio id="audio" preload="metadata"></audio>

<script>
(() => {
  const audio = document.getElementById('audio');
  const btnPlay = document.getElementById('btn-play');
  const btnPrev = document.getElementById('btn-prev');
  const btnNext = document.getElementById('btn-next');
  const btnShuffle = document.getElementById('btn-shuffle');
  const btnRepeat = document.getElementById('btn-repeat');
  const btnMute = document.getElementById('btn-mute');
  const seek = document.getElementById('seek');
  const vol = document.getElementById('vol');
  const current = document.getElementById('current');
  const duration = document.getElementById('duration');
  const title = document.getElementById('title');
  const artist = document.getElementById('artist');
  const list = document.getElementById('list');
  const btnAdd = document.getElementById('btn-add');
  const fileInput = document.getElementById('fileInput');

  // Toggleable settings
  let repeatMode = localStorage.getItem('repeatMode') || 'off'; // 'off'|'one'|'all'
  let shuffleOn = localStorage.getItem('shuffleOn') === 'true';

  // ==== EDIT THESE 4 LINES TO MATCH YOUR FILE NAMES ====
  // Put the 4 songs in /audio/ next to index.html
  const playlist = [
    { title: 'Song 1', artist: 'Artist', src: 'audio/song1.mp3', cover: '' },
    { title: 'Song 2', artist: 'Artist', src: 'audio/song2.mp3', cover: '' },
    { title: 'Song 3', artist: 'Artist', src: 'audio/song3.mp3', cover: '' },
    { title: 'Song 4', artist: 'Artist', src: 'audio/song4.mp3', cover: '' },
  ];
  // =====================================================

  const dynamicTracks = []; // from file picker
  let index = 0, userIsSeeking = false;

  const fmtTime = s => !isFinite(s) ? '0:00' : `${Math.floor(s/60)}:${Math.floor(s%60).toString().padStart(2,'0')}`;
  const getTracks = () => [...playlist, ...dynamicTracks];

  function renderList(){
    const all = getTracks();
    list.innerHTML = '';
    all.forEach((t, i) => {
      const li = document.createElement('li');
      li.className = 'track' + (i === index ? ' active' : '');
      li.dataset.idx = i;
      li.innerHTML = `
        <span class="idx">${(i+1).toString().padStart(2,'0')}</span>
        <span class="name">${t.title || (t.file?.name ?? 'Untitled')}</span>
        <span class="dur" data-dur>--:--</span>
      `;
      li.addEventListener('click', () => { load(i); play(); });
      list.appendChild(li);
    });
  }

  function load(i){
    index = i;
    const track = getTracks()[index];
    audio.src = track.src || track.url;
    audio.loop = (repeatMode === 'one');
    title.textContent = track.title || (track.file?.name ?? 'Untitled');
    artist.textContent = track.artist || '';

    document.getElementById('cover').style.background = track.cover
      ? `center / cover url('${track.cover}')`
      : 'linear-gradient(135deg,#333,#111)';

    [...document.querySelectorAll('li.track')].forEach((li, idx)=> li.classList.toggle('active', idx===index));
  }

  function play(){ audio.play(); btnPlay.textContent = '‚è∏Ô∏è'; }
  function pause(){ audio.pause(); btnPlay.textContent = '‚ñ∂Ô∏è'; }
  function toggle(){ audio.paused ? play() : pause(); }

  function next(){
    const tracks = getTracks();
    if (shuffleOn){
      let r; do { r = Math.floor(Math.random()*tracks.length); } while (r === index && tracks.length>1);
      index = r;
    } else {
      index = (index + 1) % tracks.length;
    }
    load(index); play();
  }
  function prev(){
    const tracks = getTracks();
    index = (index - 1 + tracks.length) % tracks.length;
    load(index); play();
  }

  function cycleRepeat(){
    repeatMode = repeatMode === 'off' ? 'one' : repeatMode === 'one' ? 'all' : 'off';
    localStorage.setItem('repeatMode', repeatMode);
    audio.loop = (repeatMode === 'one');
    btnRepeat.dataset.mode = repeatMode;
    btnRepeat.title = `Repeat (${repeatMode})`;
  }
  function setShuffle(v){ shuffleOn = v; localStorage.setItem('shuffleOn', v); btnShuffle.classList.toggle('on', v); }

  // Wire up UI
  btnPlay.addEventListener('click', toggle);
  btnPrev.addEventListener('click', prev);
  btnNext.addEventListener('click', next);
  btnShuffle.addEventListener('click', ()=> setShuffle(!shuffleOn));
  btnRepeat.addEventListener('click', cycleRepeat);
  btnMute.addEventListener('click', ()=>{ audio.muted = !audio.muted; btnMute.textContent = audio.muted ? 'üîá' : 'üîä'; });

  seek.addEventListener('input', ()=>{ userIsSeeking = true; });
  seek.addEventListener('change', ()=>{
    const pos = (seek.value / 100) * (audio.duration || 0);
    audio.currentTime = pos; userIsSeeking = false;
  });
  vol.addEventListener('input', ()=>{ audio.volume = +vol.value; });

  audio.addEventListener('loadedmetadata', ()=>{
    duration.textContent = fmtTime(audio.duration);
    const durEl = list.querySelector(`li.track:nth-child(${index+1}) .dur`);
    if (durEl) durEl.textContent = fmtTime(audio.duration);
  });
  audio.addEventListener('timeupdate', ()=>{
    if (!userIsSeeking && isFinite(audio.duration)){
      seek.value = (audio.currentTime / audio.duration) * 100 || 0;
    }
    current.textContent = fmtTime(audio.currentTime);
  });
  audio.addEventListener('ended', ()=>{
    if (repeatMode === 'one'){ play(); return; }
    const last = index === getTracks().length - 1;
    if (repeatMode === 'all' || !last){ next(); } else { pause(); }
  });

  // Keyboard shortcuts (outside inputs)
  document.addEventListener('keydown', (e)=>{
    if (['INPUT','TEXTAREA'].includes(e.target.tagName)) return;
    if (e.code === 'Space'){ e.preventDefault(); toggle(); }
    else if (e.key === 'ArrowRight'){ next(); }
    else if (e.key === 'ArrowLeft'){ prev(); }
    else if (e.key.toLowerCase() === 'm'){ audio.muted = !audio.muted; btnMute.textContent = audio.muted ? 'üîá' : 'üîä'; }
    else if (e.key.toLowerCase() === 's'){ setShuffle(!shuffleOn); }
    else if (e.key.toLowerCase() === 'r'){ cycleRepeat(); }
  });

  // Add local files
  btnAdd.addEventListener('click', ()=> fileInput.click());
  fileInput.addEventListener('change', (e)=>{
    const files = [...e.target.files].filter(f => f.type.startsWith('audio/'));
    for (const file of files){
      const url = URL.createObjectURL(file);
      dynamicTracks.push({ title: file.name.replace(/\.[^.]+$/, ''), artist:'', url, file });
    }
    renderList();
    if (files.length && audio.paused){ load(getTracks().length - files.length); play(); }
  });

  // Init
  renderList();
  load(0);
})();
</script>
</body>
</html>


